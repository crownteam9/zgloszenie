
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>CrownCamp â€“ Formularz zgÅ‚oszeniowy</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: 
    linear-gradient(to bottom, rgba(255, 200, 130, 0.9), rgba(255, 235, 200, 0.95)),
    url('https://cdn.pixabay.com/photo/2016/05/24/15/41/camping-1413414_1280.jpg'),
    url('https://cdn.pixabay.com/photo/2017/01/14/12/59/barbecue-1970100_1280.jpg'),
    url('https://cdn.pixabay.com/photo/2020/05/12/10/16/beer-5160949_1280.jpg'),
    url('https://cdn.pixabay.com/photo/2014/07/31/23/10/car-407165_1280.jpg'),
    url('https://cdn.pixabay.com/photo/2016/11/29/04/17/dj-1869561_1280.jpg');
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
    }

    .form-container {
      max-width: 700px;
      margin: 60px auto;
      background: rgba(255, 255, 255, 0.98);
      padding: 40px;
      border-radius: 12px;
      border: 2px solid #d35400;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }

    h2 {
      text-align: center;
      color: #d35400;
      margin-bottom: 20px;
    }

    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
      color: #333;
    }

    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
      box-sizing: border-box;
    }

    input[type="file"] {
      padding: 6px;
    }

    button {
      margin-top: 25px;
      width: 100%;
      background-color: #e67e22;
      color: white;
      border: none;
      padding: 14px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background-color: #d35400;
    }

    .confirmation {
      text-align: center;
      font-size: 18px;
      color: green;
      display: none;
      margin-top: 20px;
    }

    .admin-buttons {
      display: none;
      margin-top: 20px;
      text-align: center;
    }

    .admin-buttons button {
      width: auto;
      margin: 5px;
      padding: 10px 20px;
    }

    iframe {
      width: 100%;
      height: 300px;
      border: 2px solid #e67e22;
      border-radius: 8px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="form-container">
    
    <div style="text-align:center; margin-bottom:20px;">
        <img src="https://cdn.discordapp.com/attachments/650048146503630849/1268656710940364850/44d3120f-0894-4c30-8e7c-cffb672846e4.jpg?ex=6851c6a2&is=68507522&hm=bc09502f05041a8a197cd8a0bcc47e1bdb740f8115b9b039b7d3693386068c8a&" alt="Crown Team Logo" style="max-width:150px;">
    </div>
    <h2>Formularz zgÅ‚oszeniowy â€“ CrownCamp</h2>
    

    <form id="form" method="POST" enctype="multipart/form-data">
      <label>Adres e-mail:</label>
      <input type="email" name="email" required>

      <label>ImiÄ™ i Nazwisko:</label>
      <input type="text" name="name" required>

      <label>Model auta / motocykla:</label>
      <input type="text" name="model" required>

      <label>Tablica rejestracyjna:</label>
      <input type="text" name="plate" required>

      <label>Opis projektu (modyfikacje):</label>
      <textarea name="modifications" minlength="50" required placeholder="Napisz minimum 10 sÅ‚Ã³w..."></textarea>

      <label>Link do Instagrama (opcjonalnie):</label>
      <input type="url" name="instagram" placeholder="https://instagram.com/twoj_profil">

      <label>ZdjÄ™cia (min. 1, max 5 plikÃ³w, kaÅ¼dy do 8 MB):</label>
      <input type="file" id="file" name="photos" accept="image/*" multiple required>

      <p style="font-size: 14px; color: #444; margin-top: 20px;">WysÅ‚anie zgÅ‚oszenia jest jednoznaczne z wyraÅ¼eniem zgody na wykorzystanie przesÅ‚anych zdjÄ™Ä‡ w materiaÅ‚ach promocyjnych oraz mediach spoÅ‚ecznoÅ›ciowych CrownCamp.</p>
<button type="submit">WyÅ›lij zgÅ‚oszenie</button>
    </form>

    <div class="confirmation" id="confirmation">âœ… DziÄ™kujemy za wysÅ‚anie zgÅ‚oszenia!</div>

    <iframe src="https://maps.google.com/maps?q=Baworowo%20100A,%2059-820%20Le%C5%9Bna&output=embed"></iframe>
  </div>

  <script>
    const webhookMain = "https://discord.com/api/webhooks/1384418488768135238/mzDfJbYsJNn6-n5GZqdv8Z7DRwWn8-xutwUK4IznzCCCm3IJ11eWoDQXL1DQ22aD7_bK";
    const webhookQualified = "https://discord.com/api/webhooks/1384423840658096249/8UbSWmPAvXBcYSLLaqXnDHEnpzi2bRuPIpMYpX4qEF1zT7PII13HyUcHAH2VlAhDsE-U";
    const webhookRejected = "https://discord.com/api/webhooks/1384424047181303808/Q03CN3aA55ajUYiQWpyvUPGOikW94fZtgnF4rW8D8kP2ALxoP-gY5KbMuFdd71EYhSvG";
    let lastSubmissionTime = 0;
    let savedData = '';

    document.getElementById("form").addEventListener("submit", async function (e) {
      e.preventDefault();
      const now = Date.now();
      if (now - lastSubmissionTime < 5 * 60 * 1000) {
        alert("MoÅ¼esz wysÅ‚aÄ‡ tylko jedno zgÅ‚oszenie z tego adresu IP co 5 minut.");
        return;
      }
      lastSubmissionTime = now;

      const form = e.target;
      const files = document.getElementById("file").files;
      if (files.length < 1 || files.length > 5) {
        alert("Musisz przesÅ‚aÄ‡ od 1 do 5 zdjÄ™Ä‡.");
        return;
      }

      const email = form.email.value;
      const name = form.name.value;
      const model = form.model.value;
      const plate = form.plate.value;
      const modifications = form.modifications.value;
      const instagram = form.instagram.value;
      const zgoda = form.zgoda.checked;

      savedData = `ðŸ“§ Email: ${email}
ðŸ‘¤ ImiÄ™ i nazwisko: ${name}
ðŸš— Model: ${model}
ðŸ”¢ Tablica: ${plate}
ðŸ›  Opis: ${modifications}${instagram ? `
ðŸ“¸ Instagram: ${instagram}` : ''}`;

      const summaryMessage = {
        content: `ðŸ“¥ **Nowe zgÅ‚oszenie CrownCamp!**
${savedData}
ðŸ“Ž Liczba zdjÄ™Ä‡: ${files.length}`
      };

      await fetch(webhookMain, {
        method: "POST",
        body: JSON.stringify(summaryMessage),
        headers: { "Content-Type": "application/json" }
      });

      for (let i = 0; i < files.length; i++) {
        const formData = new FormData();
        const imageMessage = {
          content: `ðŸ“Ž ZdjÄ™cie ${i + 1}/${files.length} od ${name}`
        };
        formData.append("payload_json", JSON.stringify(imageMessage));
        formData.append("file", files[i]);

        await fetch(webhookMain, {
          method: "POST",
          body: formData
        });
      }

      document.getElementById("confirmation").style.display = "block";
      document.getElementById("admin-buttons").style.display = "block";
      form.reset();
    });

    ).then(() => {
        alert("ZgÅ‚oszenie przesÅ‚ane na odpowiedni kanaÅ‚.");
      });
    }
  </script>
</body>
</html>
